(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{a55b:function(e,i,s){"use strict";s.r(i);var n=function(){var e=this,i=e.$createElement,s=e._self._c||i;return s("div",{staticClass:"login-wrapper",attrs:{id:"loginBackground"}},[s("div",{staticClass:"form-wrapper"},[s("h1",{staticClass:"login-title"},[e._v("登录")]),s("p",{staticClass:"login-system"},[e._v(e._s(e.$config.siteName))]),s("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginFormRules,"label-width":"100px","hide-required-asterisk":""}},[s("el-form-item",{attrs:{prop:"telephone"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-mobile-phone",placeholder:"手机号"},model:{value:e.loginForm.telephone,callback:function(i){e.$set(e.loginForm,"telephone",i)},expression:"loginForm.telephone"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"prefix-icon":"el-icon-lock",placeholder:"密码","show-password":""},model:{value:e.loginForm.password,callback:function(i){e.$set(e.loginForm,"password",i)},expression:"loginForm.password"}})],1),e.screenWidth>768?s("el-form-item",[s("drag-verify",{ref:"dragVerifyRef",attrs:{text:"请按住滑块拖动解锁",successText:"验证通过",handlerIcon:"el-icon-d-arrow-right",successIcon:"el-icon-circle-check",handlerBg:"#F5F7FA",width:375,isPassing:e.isPassing},on:{"update:isPassing":[function(i){e.isPassing=i},e.updateIsPassing],"update:is-passing":function(i){e.isPassing=i}}})],1):e._e(),s("el-form-item",{staticClass:"login-btn-form-item"},[s("el-button",{staticClass:"login-btn",attrs:{type:"primary",disabled:e.loginBtnDisabled,loading:e.loginBtnLoading},on:{click:function(i){return e.submitForm("loginForm")}}},[e._v("登录")])],1)],1)],1),e.screenWidth<=768?s("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowDragVerify,expression:"isShowDragVerify"}],staticClass:"drag-verify-modal",on:{click:function(i){if(i.target!==i.currentTarget)return null;e.isShowDragVerify=!1}}},[s("drag-verify",{ref:"dragVerifyRef",attrs:{text:"请按住滑块拖动解锁",successText:"验证通过",handlerIcon:"el-icon-d-arrow-right",successIcon:"el-icon-circle-check",handlerBg:"#F5F7FA",width:300,isPassing:e.isPassing},on:{"update:isPassing":[function(i){e.isPassing=i},e.updateIsPassing],"update:is-passing":function(i){e.isPassing=i}}})],1):e._e()])},t=[],r=(s("ac1f"),s("5319"),s("9afa")),o=s.n(r),a=s("e979"),l=s("7cd9"),c={color:"64, 158, 255",pointColor:"64, 158, 255",opacity:.5,count:99,zIndex:-1},g={name:"Login",components:{DragVerify:a["a"]},data:function(){return{loginForm:{telephone:"",password:""},loginFormRules:{telephone:[{required:!0,message:"请输入手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:5,max:20,message:"长度在 5 到 20 个字符",trigger:"blur"}]},isShowDragVerify:!1,isPassing:!1,loginBtnDisabled:!0,loginBtnLoading:!1}},computed:{url:function(){var e=this.$route.query.Rurl;return e?{path:e}:{name:"File",query:{fileType:0,filePath:"/"}}},screenWidth:function(){return this.$store.state.common.screenWidth}},watch:{"loginForm.telephone":function(){this.resetVerifyPassing()},"loginForm.password":function(){this.resetVerifyPassing()}},created:function(){if(this.$store.getters.isLogin){var e=this.$store.getters.username;this.$message({message:"".concat(e," 您已登录！已跳转到首页"),center:!0,type:"success"}),this.$router.replace({name:"Home"})}this.$nextTick((function(){var e=document.getElementById("loginBackground");new o.a(e,c)}))},mounted:function(){this.screenWidth<=768&&(this.loginBtnDisabled=!1)},methods:{resetVerifyPassing:function(){this.isPassing=!1,this.$refs.dragVerifyRef.reset(),this.screenWidth>768&&(this.loginBtnDisabled=!0)},updateIsPassing:function(e){e?this.screenWidth>768?this.loginBtnDisabled=!1:this.handleUserLogin("loginForm"):this.screenWidth>768&&(this.loginBtnDisabled=!0)},submitForm:function(e){var i=this;this.loginBtnLoading=!0,this.$refs[e].validate((function(s){if(!s)return i.$message.error("请完善信息！"),i.loginBtnLoading=!1,!1;i.screenWidth>768?i.handleUserLogin(e):(i.isShowDragVerify=!0,i.loginBtnLoading=!1)}))},handleUserLogin:function(e){var i=this;Object(l["c"])(this.loginForm,!0).then((function(s){i.loginBtnLoading=!1,i.screenWidth<=768&&(i.isShowDragVerify=!1),s.success?(i.$common.setCookies(i.$config.tokenKeyName,s.data.token),i.$message.success("登录成功！"),i.$router.replace(i.url),i.$refs[e].resetFields()):(i.$message.error("手机号或密码错误！"),i.isPassing=!1,i.$refs.dragVerifyRef.reset())})).catch((function(){i.loginBtnLoading=!1,i.screenWidth<=768&&(i.isShowDragVerify=!1)}))}}},d=g,u=(s("bde1"),s("2877")),h=Object(u["a"])(d,n,t,!1,null,"774d686b",null);i["default"]=h.exports},b0fb:function(e,i,s){},bde1:function(e,i,s){"use strict";s("b0fb")}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["file"],{"04d1":function(e,t,i){var a=i("342f"),l=a.match(/firefox\/(\d+)/i);e.exports=!!l&&+l[1]},"19d9":function(e,t,i){"use strict";i("1f8f")},"1c59":function(e,t,i){"use strict";var a=i("6d61"),l=i("6566");a("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),l)},"1f8f":function(e,t,i){},"4e82":function(e,t,i){"use strict";var a=i("23e7"),l=i("e330"),s=i("59ed"),n=i("7b0b"),r=i("07fa"),o=i("577e"),c=i("d039"),u=i("addb"),h=i("a640"),d=i("04d1"),p=i("d998"),f=i("2d00"),m=i("512ce"),g=[],b=l(g.sort),y=l(g.push),v=c((function(){g.sort(void 0)})),C=c((function(){g.sort(null)})),T=h("sort"),w=!c((function(){if(f)return f<70;if(!(d&&d>3)){if(p)return!0;if(m)return m<603;var e,t,i,a,l="";for(e=65;e<76;e++){switch(t=String.fromCharCode(e),e){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(a=0;a<47;a++)g.push({k:t+a,v:i})}for(g.sort((function(e,t){return t.v-e.v})),a=0;a<g.length;a++)t=g[a].k.charAt(0),l.charAt(l.length-1)!==t&&(l+=t);return"DGBEFHACIJK"!==l}})),F=v||!C||!T||!w,$=function(e){return function(t,i){return void 0===i?-1:void 0===t?1:void 0!==e?+e(t,i)||0:o(t)>o(i)?1:-1}};a({target:"Array",proto:!0,forced:F},{sort:function(e){void 0!==e&&s(e);var t=n(this);if(w)return void 0===e?b(t):b(t,e);var i,a,l=[],o=r(t);for(a=0;a<o;a++)a in t&&y(l,t[a]);u(l,$(e)),i=l.length,a=0;while(a<i)t[a]=l[a++];while(a<o)delete t[a++];return t}})},"512ce":function(e,t,i){var a=i("342f"),l=a.match(/AppleWebKit\/(\d+)\./);e.exports=!!l&&+l[1]},"53d5":function(e,t,i){},"5c65":function(e,t,i){},"5e98":function(e,t,i){"use strict";i("e58c")},6062:function(e,t,i){i("1c59")},"656b":function(e,t,i){"use strict";i("8796")},"65f9":function(e,t,i){},"66a2":function(e,t,i){},"736b":function(e,t,i){},"781b":function(e,t,i){"use strict";i("aa68")},8796:function(e,t,i){},"8a79":function(e,t,i){"use strict";var a=i("23e7"),l=i("e330"),s=i("06cf").f,n=i("50c4"),r=i("577e"),o=i("5a34"),c=i("1d80"),u=i("ab13"),h=i("c430"),d=l("".endsWith),p=l("".slice),f=Math.min,m=u("endsWith"),g=!h&&!m&&!!function(){var e=s(String.prototype,"endsWith");return e&&!e.writable}();a({target:"String",proto:!0,forced:!g&&!m},{endsWith:function(e){var t=r(c(this));o(e);var i=arguments.length>1?arguments[1]:void 0,a=t.length,l=void 0===i?a:f(n(i),a),s=r(e);return d?d(t,s,l):p(t,l-s.length,l)===s}})},9326:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-table-wrapper"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"file-table",class:["file-type-"+e.fileType,"Share"===e.routeName?"share":""],attrs:{fit:"","element-loading-text":"文件加载中……","tooltip-effect":"dark",data:e.fileList,"highlight-current-row":!0},on:{"selection-change":e.handleSelectRow,"sort-change":e.handleSortChange,"row-contextmenu":e.handleContextMenu}},[8!==e.fileType?i("el-table-column",{key:"selection",attrs:{type:"selection",width:"56",align:"center"}}):e._e(),i("el-table-column",{key:"isDir",attrs:{label:"",prop:"isDir",width:e.screenWidth<=768?40:56,align:"center","class-name":"file-icon-column"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{width:"30px","max-height":"30px",cursor:"pointer"},attrs:{src:e.$file.setFileImg(t.row),title:t.row.isDir?"":"点击预览"},on:{click:function(i){return e.$file.handleFileNameClick(t.row,t.$index,e.sortedFileList)}}})]}}])}),i("el-table-column",{key:"fileName",attrs:{prop:"fileName","sort-by":["isDir","fileName"],sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{on:{click:function(i){return e.$file.handleFileNameClick(t.row,t.$index,e.sortedFileList)}}},[i("span",{staticClass:"file-name",staticStyle:{cursor:"pointer"},attrs:{title:t.row.isDir?"":"点击预览"},domProps:{innerHTML:e._s(e.$file.getFileNameComplete(t.row,!0))}}),e.screenWidth<=768?i("div",{staticClass:"file-info"},[e._v(" "+e._s(t.row.uploadTime)+" "),i("span",{staticClass:"file-size"},[e._v(" "+e._s(0===t.row.isDir?e.$file.calculateFileSize(t.row.fileSize):"")+" ")])]):e._e()])]}}])},[i("template",{slot:"header"},[i("span",[e._v("文件名")])])],2),![0,8].includes(Number(e.$route.query.fileType))&&"Share"!==e.routeName&&e.screenWidth>768?i("el-table-column",{key:"filePath",attrs:{label:6===e.fileType?"原路径":"路径",prop:"filePath","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{staticStyle:{cursor:"pointer"},attrs:{title:"点击跳转"},on:{click:function(i){return e.$router.push({query:{filePath:t.row.filePath,fileType:0}})}}},[e._v(e._s(t.row.filePath))])]}}],null,!1,1587135183)}):e._e(),e.selectedColumnList.includes("extendName")&&e.screenWidth>768?i("el-table-column",{key:"extendName",attrs:{label:"类型",width:"80",prop:"extendName","sort-by":["isDir","extendName"],sortable:"","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(e.$file.getFileType(t.row)))])]}}],null,!1,2003600077)}):e._e(),e.selectedColumnList.includes("fileSize")&&e.screenWidth>768?i("el-table-column",{key:"fileSize",attrs:{label:"大小",width:"100",prop:"fileSize","sort-by":["isDir","fileSize"],sortable:"",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(0===t.row.isDir?e.$file.calculateFileSize(t.row.fileSize):"")+" ")]}}],null,!1,3828750137)}):e._e(),e.selectedColumnList.includes("uploadTime")&&![7,8].includes(e.fileType)&&!["Share"].includes(this.routeName)&&e.screenWidth>768?i("el-table-column",{key:"uploadTime",attrs:{label:"修改日期",prop:"uploadTime",width:"160","sort-by":["isDir","uploadTime"],sortable:"",align:"center"}}):e._e(),6===e.fileType&&e.selectedColumnList.includes("deleteTime")&&e.screenWidth>768?i("el-table-column",{key:"deleteTime",attrs:{label:"删除日期",prop:"deleteTime",width:"160","sort-by":["isDir","deleteTime"],sortable:"",align:"center"}}):e._e(),8===e.fileType&&e.screenWidth>768?i("el-table-column",{key:"shareType",attrs:{label:"分享类型",prop:"shareType",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(1===t.row.shareType?"私密":"公共")+" ")]}}],null,!1,1274152603)}):e._e(),8===e.fileType&&e.screenWidth>768?i("el-table-column",{key:"shareTime",attrs:{label:"分享时间",prop:"shareTime",width:"160","sort-by":["isDir","shareTime"],"show-overflow-tooltip":"",sortable:"",align:"center"}}):e._e(),8===e.fileType&&e.screenWidth>768?i("el-table-column",{key:"endTime",attrs:{label:"过期时间",prop:"endTime",width:"190","sort-by":["isDir","endTime"],"show-overflow-tooltip":"",sortable:"",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("div",[e.$file.getFileShareStatus(t.row.endTime)?i("i",{staticClass:"el-icon-warning"}):i("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(t.row.endTime)+" ")])]}}],null,!1,1426114434)}):e._e(),e.screenWidth<=768?i("el-table-column",{key:"operation",attrs:{label:"",width:"48"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("i",{staticClass:"file-operate el-icon-more",class:"operate-more-"+t.$index,on:{click:function(i){return e.handleClickMore(t.row,i)}}})]}}],null,!1,4078593407)}):e._e()],1)],1)},l=[],s=i("5530"),n=(i("a9e3"),i("b0c0"),i("2f62")),r={name:"FileTable",props:{fileType:{required:!0,type:Number},filePath:{required:!0,type:String},fileList:{required:!0,type:Array},loading:{required:!0,type:Boolean}},data:function(){return{officeFileType:["ppt","pptx","doc","docx","xls","xlsx"],sortedFileList:[]}},computed:Object(s["a"])(Object(s["a"])({},Object(n["b"])(["selectedColumnList"])),{},{routeName:function(){return this.$route.name},screenWidth:function(){return this.$store.state.common.screenWidth}}),watch:{filePath:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort()},fileType:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort()},fileList:function(){this.clearSelectedTable(),this.$refs.multipleTable.clearSort(),this.sortedFileList=this.fileList}},methods:{handleSortChange:function(){this.sortedFileList=this.$refs.multipleTable.tableData},handleContextMenu:function(e,t,i){var a=this;i.cancelBubble=!0,this.screenWidth>768&&(i.preventDefault(),this.$refs.multipleTable.setCurrentRow(e),this.$openBox.contextMenu({selectedFile:e,domEvent:i}).then((function(e){a.$refs.multipleTable.setCurrentRow(),"confirm"===e&&(a.$emit("getTableDataByType"),a.$store.dispatch("showStorage"))})))},clearSelectedTable:function(){this.$refs.multipleTable.clearSelection()},handleSelectRow:function(e){this.$store.commit("changeSelectedFiles",e),this.$store.commit("changeIsBatchOperation",0!==e.length)},handleClickMore:function(e,t){var i=this;this.$refs.multipleTable.setCurrentRow(e),this.$openBox.contextMenu({selectedFile:e,domEvent:t}).then((function(e){i.$refs.multipleTable.setCurrentRow(),"confirm"===e&&(i.$emit("getTableDataByType"),i.$store.dispatch("showStorage"))}))}}},o=r,c=(i("c0ea"),i("2877")),u=Object(c["a"])(o,a,l,!1,null,"68c70345",null);t["a"]=u.exports},"9c88":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-wrapper"},[i("el-container",{staticClass:"el-container"},[i("el-aside",{attrs:{width:"auto"}},[i("AsideMenu")],1),i("el-container",[i("el-main",{staticClass:"el-main"},[i("FileList")],1)],1)],1)],1)},l=[],s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"side-menu-wrapper"},[e.screenWidth<=768?i("el-drawer",{attrs:{visible:e.isDrawer,"with-header":!1,size:210,direction:"ltr"},on:{"update:visible":function(t){e.isDrawer=t}}},[i("el-menu",{staticClass:"side-menu",attrs:{"default-active":e.activeIndex,router:!0,collapse:e.isCollapse}},[i("el-submenu",{staticClass:"my-file",attrs:{index:"myFile"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-files"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的文件")])]),i("el-menu-item",{attrs:{index:"0",route:{name:"File",query:{fileType:0,filePath:"/"}}}},[i("i",{staticClass:"el-icon-menu"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部")])])],2),i("el-menu-item",{staticClass:"recovery",attrs:{index:"6",route:{name:"File",query:{fileType:6}}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("回收站")])]),i("el-menu-item",{staticClass:"my-share",attrs:{index:"8",route:{name:"File",query:{fileType:8,filePath:"/"}}}},[i("i",{staticClass:"el-icon-share"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的分享")])])],1),i("div",{staticClass:"storage-wrapper",class:{fold:e.isCollapse}},[i("el-progress",{attrs:{percentage:e.storagePercentage,color:e.storageColor,"show-text":!1,type:e.isCollapse?"circle":"line",width:32,"stroke-width":e.isCollapse?4:6,"stroke-linecap":"square"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"text"},[i("span",{staticClass:"label"},[e._v("存储")]),i("span",[e._v(" "+e._s(e.$file.calculateFileSize(e.storageValue))+" / "+e._s(e.$file.calculateFileSize(e.totalStorageValue))+" ")])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],staticClass:"text"},[i("span",[e._v(e._s(e.$file.calculateFileSize(e.storageValue)))])])],1)],1):[i("el-menu",{staticClass:"side-menu",attrs:{"default-active":e.activeIndex,router:!0,collapse:e.isCollapse}},[i("el-submenu",{staticClass:"my-file",attrs:{index:"myFile"}},[i("template",{slot:"title"},[i("i",{staticClass:"el-icon-files"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的文件")])]),i("el-menu-item",{attrs:{index:"0",route:{name:"File",query:{fileType:0,filePath:"/"}}}},[i("i",{staticClass:"el-icon-menu"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("全部")])])],2),i("el-menu-item",{staticClass:"recovery",attrs:{index:"6",route:{name:"File",query:{fileType:6}}}},[i("i",{staticClass:"el-icon-delete"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("回收站")])]),i("el-menu-item",{staticClass:"my-share",attrs:{index:"8",route:{name:"File",query:{fileType:8,filePath:"/"}}}},[i("i",{staticClass:"el-icon-share"}),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("我的分享")])])],1),i("div",{staticClass:"storage-wrapper",class:{fold:e.isCollapse}},[i("el-progress",{attrs:{percentage:e.storagePercentage,color:e.storageColor,"show-text":!1,type:e.isCollapse?"circle":"line",width:32,"stroke-width":e.isCollapse?4:6,"stroke-linecap":"square"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isCollapse,expression:"!isCollapse"}],staticClass:"text"},[i("span",{staticClass:"label"},[e._v("存储")]),i("span",[e._v(e._s(e.$file.calculateFileSize(e.storageValue))+" / "+e._s(e.$file.calculateFileSize(e.totalStorageValue)))])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isCollapse,expression:"isCollapse"}],staticClass:"text"},[i("span",[e._v(e._s(e.$file.calculateFileSize(e.storageValue)))])])],1)],i("el-tooltip",{attrs:{effect:"dark",content:e.isCollapse?"展开":"收起",placement:"right"}},[i("div",{staticClass:"aside-title",on:{click:function(t){e.isCollapse?e.isCollapse=!1:e.isCollapse=!0}}},[i("i",{staticClass:"icon",class:e.isCollapse?"el-icon-d-arrow-right":"el-icon-d-arrow-left",attrs:{title:e.isCollapse?"展开":"收起"}})])])],2)},n=[],r=(i("99af"),i("a9e3"),{name:"SideMenu",data:function(){return{isDrawer:!1,isCollapse:!1,myFileMenuMap:{0:"全部",1:"图片",2:"文档",3:"视频",4:"音乐",5:"其他",6:"回收站",8:"我的分享"},storageColor:[{color:"#67C23A",percentage:50},{color:"#E6A23C",percentage:80},{color:"#F56C6C",percentage:100}]}},computed:{activeIndex:function(){return String(this.$route.query.fileType)},storageValue:function(){return this.$store.state.sideMenu.storageValue},totalStorageValue:function(){return this.$store.state.sideMenu.totalStorageValue},storagePercentage:function(){return this.totalStorageValue?this.storageValue/this.totalStorageValue*100:0},screenWidth:function(){return this.$store.state.common.screenWidth}},watch:{activeIndex:function(e){document.title="".concat(this.myFileMenuMap[Number(e)]," - ").concat(this.$config.siteName),this.isDrawer=!1},isCollapse:function(e){localStorage.setItem("qiwen_is_collapse",e),this.screenWidth<=768&&e&&(this.isDrawer=!0,this.isCollapse=!1)}},created:function(){this.isCollapse="true"===localStorage.getItem("qiwen_is_collapse")},mounted:function(){document.title="".concat(this.myFileMenuMap[Number(this.activeIndex)]," - ").concat(this.$config.siteName)}}),o=r,c=(i("5e98"),i("2877")),u=Object(c["a"])(o,s,n,!1,null,"e2a58d7c",null),h=u.exports,d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-list-wrapper"},[i("el-header",{attrs:{height:"auto"}},[i("OperationMenu",{attrs:{fileType:e.fileType,filePath:e.filePath},on:{getSearchFileList:e.getSearchFileList,getTableDataByType:e.getTableDataByType}})],1),i("div",{staticClass:"middle-wrapper"},[i("BreadCrumb",{staticClass:"breadcrumb",attrs:{fileType:e.fileType,filePath:e.filePath},on:{getTableDataByType:e.getTableDataByType}})],1),0===e.fileModel?i("FileTable",{attrs:{fileType:e.fileType,filePath:e.filePath,fileList:e.fileList,loading:e.loading},on:{"update:loading":function(t){e.loading=t},getTableDataByType:e.getTableDataByType},nativeOn:{contextmenu:function(t){return e.handleClickRight.apply(null,arguments)}}}):e._e(),1===e.fileModel?i("FileGrid",{attrs:{fileType:e.fileType,filePath:e.filePath,fileList:e.fileList,loading:e.loading},on:{getTableDataByType:e.getTableDataByType},nativeOn:{contextmenu:function(t){return e.handleClickRight.apply(null,arguments)}}}):e._e(),2===e.fileModel&&1===e.fileType?i("FileTimeLine",{staticClass:"image-model",attrs:{fileList:e.fileList,loading:e.loading},on:{"update:loading":function(t){e.loading=t},getTableDataByType:e.getTableDataByType},nativeOn:{contextmenu:function(t){return e.handleClickRight.apply(null,arguments)}}}):e._e(),i("div",{staticClass:"pagination-wrapper"},[i("div",{staticClass:"current-page-count"},[e._v("当前页"+e._s(e.fileList.length)+"条")]),6!==e.fileType?i("el-pagination",{attrs:{"current-page":e.pageData.currentPage,"page-size":e.pageData.pageCount,total:e.pageData.total,"page-sizes":[10,50,100,200],layout:e.screenWidth<=768?"total, prev, next, jumper":"sizes, total, prev, pager, next"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}}):e._e()],1)],1)},p=[],f=i("5530"),m=(i("b0c0"),i("caad"),i("d81d"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"operationMenuRef",staticClass:"operation-menu-wrapper",class:"file-type-"+e.fileType},[e.selectedFiles.length&&e.isBatchOperation||0!==e.fileType?e._e():i("el-button-group",{staticClass:"create-operate-group"},[i("el-dropdown",{staticClass:"upload-drop",attrs:{trigger:"hover"}},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-upload2",id:"uploadFileId"}},[e._v("上传"),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{nativeOn:{click:function(t){return e.handleUploadFileBtnClick(1)}}},[e._v("上传文件")])],1)],1)],1),i("div",{staticClass:"batch-operate-group"},[e.isBatchOperation?i("el-button-group",[e.selectedFiles.length?i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-delete"},on:{click:e.handleBatchDeleteBtnClick}},[e._v("批量删除")]):e._e(),e.selectedFiles.length&&6!==e.fileType?i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-download"},on:{click:e.handleBatchDownloadBtnClick}},[e._v("批量下载")]):e._e(),e.selectedFiles.length&&6!==e.fileType&&"Share"!==e.$route.name?i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-share"},on:{click:e.handleBatchShareBtnClick}},[e._v("批量分享")]):e._e()],1):e._e()],1),i("a",{ref:"batchDownloadRef",attrs:{target:"_blank",href:e.batchDownloadLink}})],1)}),g=[],b=(i("a15b"),i("2532"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"select-column"},[i("div",{staticClass:"text",on:{click:e.handleSetShowColumnBtnClick}},[i("i",{staticClass:"el-icon-s-operation"}),e._v(" 设置显示字段 ")]),i("el-dialog",{attrs:{title:"设置表格列显隐",width:"700px","append-to-body":!0,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-checkbox-group",{model:{value:e.selectedColumn,callback:function(t){e.selectedColumn=t},expression:"selectedColumn"}},e._l(e.columnOptions,(function(t){return i("el-checkbox",{key:t.value,attrs:{label:t.value}},[e._v(e._s(t.label))])})),1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dialogOk()}}},[e._v("确 定")])],1)],1)],1)}),y=[],v={name:"SelectColumn",data:function(){return{dialogVisible:!1,selectedColumn:[],columnOptions:[{value:"extendName",label:"类型"},{value:"fileSize",label:"大小"},{value:"uploadTime",label:"修改日期"},{value:"deleteTime",label:"删除日期"}]}},methods:{handleSetShowColumnBtnClick:function(){this.selectedColumn=this.$store.getters.selectedColumnList,this.dialogVisible=!0},dialogOk:function(){this.$store.commit("changeSelectedColumnList",this.selectedColumn),this.dialogVisible=!1}}},C=v,T=(i("656b"),Object(c["a"])(C,b,y,!1,null,"5e355a26",null)),w=T.exports,F={name:"OperationMenu",props:{fileType:{required:!0,type:Number},filePath:{required:!0,type:String}},components:{SelectColumn:w},data:function(){return{searchFile:{fileName:""},operatePopoverVisible:!1,fileGroupLable:0,dirImg:i("a6b2"),wordImg:i("9268"),excelImg:i("d07d"),pptImg:i("9dab")}},computed:{uploadFileParams:function(){return{filePath:this.filePath,isDir:0}},fileModel:function(){return this.$store.getters.fileModel},gridSize:{get:function(){return this.$store.getters.gridSize},set:function(e){this.$store.commit("changeGridSize",e)}},selectedFiles:function(){return this.$store.state.fileList.selectedFiles},isBatchOperation:function(){return this.$store.state.fileList.isBatchOperation},screenWidth:function(){return this.$store.state.common.screenWidth},batchDownloadLink:function(){return"".concat(this.$config.baseContext,"/filetransfer/batchDownloadFile?userFileIds=").concat(this.selectedFiles.map((function(e){return e.userFileId})).join(","))}},watch:{fileType:function(e,t){1===t&&2===this.fileModel&&(this.$store.commit("changeFileModel",0),this.fileGroupLable=0)},operatePopoverVisible:function(e){!0===e?document.body.addEventListener("click",this.closeOperatePopover):document.body.removeEventListener("click",this.closeOperatePopover)}},mounted:function(){this.fileGroupLable=this.fileModel},methods:{handleClickAddFolderBtn:function(){var e=this;this.$openDialog.addFolder({filePath:this.$route.query.filePath||"/"}).then((function(t){"confirm"===t&&e.$emit("getTableDataByType")}))},handleCreateFile:function(e){var t=this;this.$openDialog.addFile({extendName:e}).then((function(e){"confirm"===e&&t.$emit("getTableDataByType")}))},handleUploadFileBtnClick:function(e){this.$openBox.uploadFile({params:this.uploadFileParams,uploadWay:e,serviceEl:this,callType:1})},handleBatchDeleteBtnClick:function(){var e=this;this.$openDialog.deleteFile({isBatchOperation:!0,fileInfo:this.selectedFiles,deleteMode:6===this.fileType?2:1}).then((function(t){"confirm"===t&&(e.$emit("getTableDataByType"),e.$store.dispatch("showStorage"))}))},handleBatchMoveBtnClick:function(){var e=this;this.selectedFiles.length>0?this.$openDialog.moveFile({isBatchOperation:!0,fileInfo:this.selectedFiles}).then((function(t){"confirm"===t&&e.$emit("getTableDataByType")})):this.$message.warning("请先勾选文件")},handleBatchShareBtnClick:function(){this.$openDialog.shareFile({fileInfo:this.selectedFiles.map((function(e){return{userFileId:e.userFileId}}))})},handleBatchDownloadBtnClick:function(){this.$refs["batchDownloadRef"].click()},handleSearchInputChange:function(e){""===e?this.$emit("getTableDataByType"):this.$emit("getSearchFileList",e)},handleBatchOperationChange:function(){this.$store.commit("changeIsBatchOperation",!this.isBatchOperation)},handleFileDisplayModelChange:function(e){this.fileGroupLable=e,this.$openBox.contextMenu.close(),this.$store.commit("changeFileModel",e),this.handleSearchInputChange(this.searchFile.fileName),this.operatePopoverVisible=!1},formatTooltip:function(e){return"".concat(e,"px")},closeOperatePopover:function(e){e.target.className.includes("setting-icon")||(this.operatePopoverVisible=!1)}}},$=F,S=(i("c82d5"),Object(c["a"])($,m,g,!1,null,"601ea3a2",null)),_=S.exports,x=i("fd26"),k=i("9326"),D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"file-grid-wrapper"},[i("ul",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"file-list",attrs:{"element-loading-text":"文件加载中……"}},e._l(e.fileListSorted,(function(t,a){return i("li",{key:a,staticClass:"file-item",class:t.userFileId===e.selectedFile.userFileId?"active":"",style:"width: "+(e.gridSize+40)+"px; ",attrs:{title:e.$file.getFileNameComplete(t)},on:{click:function(i){return e.$file.handleFileNameClick(t,a,e.fileListSorted)},contextmenu:function(i){return i.preventDefault(),e.handleContextMenu(t,a,i)}}},[i("img",{staticClass:"file-img",style:"width: "+e.gridSize+"px; height: "+e.gridSize+"px;",attrs:{src:e.$file.setFileImg(t)}}),i("div",{staticClass:"file-name",domProps:{innerHTML:e._s(e.$file.getFileNameComplete(t,!0))}}),e.screenWidth<=768?i("i",{staticClass:"file-operate el-icon-more",class:"operate-more-"+a,on:{click:function(i){return i.stopPropagation(),e.handleClickMore(t,i)}}}):e._e(),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isBatchOperation,expression:"isBatchOperation"}],staticClass:"file-checked-wrapper",class:{checked:t.checked},on:{click:function(e){if(e.stopPropagation(),e.target!==e.currentTarget)return null;t.checked=!t.checked}}},[i("el-checkbox",{staticClass:"file-checked",on:{click:function(e){e.stopPropagation(),t.checked=!t.checked}},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"item.checked"}})],1)])})),0)])},B=[],P=i("2909"),L=(i("4de4"),i("d3b7"),i("4e82"),i("2f62")),M={name:"FileGrid",props:{fileType:{required:!0,type:Number},filePath:{required:!0,type:String},fileList:Array,loading:Boolean},data:function(){return{fileListSorted:[],officeFileType:["ppt","pptx","doc","docx","xls","xlsx"],selectedFile:{}}},computed:Object(f["a"])(Object(f["a"])({},Object(L["b"])(["gridSize"])),{},{isBatchOperation:function(){return this.$store.state.fileList.isBatchOperation},selectedFileList:function(){var e=this.fileListSorted.filter((function(e){return e.checked}));return e},screenWidth:function(){return this.$store.state.common.screenWidth}}),watch:{fileList:function(e){this.fileListSorted=Object(P["a"])(e).sort((function(e,t){return t.isDir-e.isDir})).map((function(e){return Object(f["a"])(Object(f["a"])({},e),{},{checked:!1})}))},selectedFileList:function(e){this.$store.commit("changeSelectedFiles",e),this.$store.commit("changeIsBatchOperation",0!==e.length)}},methods:{handleContextMenu:function(e,t,i){var a=this;i.cancelBubble=!0,this.screenWidth>768&&(this.selectedFile=e,this.isBatchOperation||(i.preventDefault(),this.$openBox.contextMenu({selectedFile:e,domEvent:i}).then((function(e){a.selectedFile={},"confirm"===e&&(a.$emit("getTableDataByType"),a.$store.dispatch("showStorage"))}))))},handleClickMore:function(e,t){var i=this;this.selectedFile=e,this.isBatchOperation||(t.preventDefault(),this.$openBox.contextMenu({selectedFile:e,domEvent:t}).then((function(e){i.selectedFile={},"confirm"===e&&(i.$emit("getTableDataByType"),i.$store.dispatch("showStorage"))})))}}},O=M,N=(i("781b"),Object(c["a"])(O,D,B,!1,null,"2945bd26",null)),I=N.exports,z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"image-timeline-wrapper"},[i("div",{staticClass:"radio"},[e._v(" 排序： "),i("el-radio-group",{model:{value:e.reverse,callback:function(t){e.reverse=t},expression:"reverse"}},[i("el-radio",{attrs:{label:!0}},[e._v("倒序")]),i("el-radio",{attrs:{label:!1}},[e._v("正序")])],1)],1),e.imageTimelineData.length?i("el-timeline",{staticClass:"image-timeline-list",attrs:{reverse:e.reverse}},e._l(e.imageTimelineData,(function(t,a){return i("el-timeline-item",{key:a,staticClass:"image-timeline-item",attrs:{timestamp:t.uploadDate,color:"#409EFF",placement:"top"}},[i("ul",{staticClass:"image-list"},e._l(t.imageList,(function(l,s){return i("li",{key:a+"-"+s,staticClass:"image-item",style:"width: "+(e.gridSize+40)+"px; ",on:{click:function(i){return e.$file.handleImgPreview(s,{},t.imageList)},contextmenu:function(i){return i.preventDefault(),e.handleContextMenu(t,s,i)}}},[i("img",{staticClass:"image",style:"width: "+e.gridSize+"px; height: "+e.gridSize+"px;",attrs:{src:e.$file.getMinImgStream(l),alt:e.$file.getFileNameComplete(l)}}),i("div",{staticClass:"image-name",domProps:{innerHTML:e._s(e.$file.getFileNameComplete(l,!0))}})])})),0)])})),1):e._e()],1)},q=[],W=(i("6062"),i("3ca3"),i("ddb0"),i("ac1f"),i("1276"),i("159b"),{name:"FileTimeLine",props:{fileList:{required:!0,type:Array}},data:function(){return{reverse:!0}},computed:{imageTimelineData:function(){var e=this,t=[],i=new Set(this.fileList.map((function(e){return e.uploadTime.split(" ")[0]}))),a=Object(P["a"])(i);return a.forEach((function(i){t.push({uploadDate:i,imageList:e.fileList.filter((function(e){return e.uploadTime.split(" ")[0]===i}))})})),t},gridSize:function(){return this.$store.getters.gridSize},screenWidth:function(){return this.$store.state.common.screenWidth}},methods:{handleContextMenu:function(e,t,i){var a=this;i.cancelBubble=!0,this.screenWidth>768&&(this.selectedFile=e,this.isBatchOperation||(i.preventDefault(),this.$openBox.contextMenu({selectedFile:e,domEvent:i}).then((function(e){a.selectedFile={},"confirm"===e&&(a.$emit("getTableDataByType"),a.$store.dispatch("showStorage"))}))))}}}),j=W,E=(i("e09e"),Object(c["a"])(j,z,q,!1,null,"14897ec0",null)),V=E.exports,R=i("60fb"),A={name:"FileList",components:{OperationMenu:_,BreadCrumb:x["a"],FileTable:k["a"],FileGrid:I,FileTimeLine:V},data:function(){return{fileNameSearch:"",loading:!0,fileList:[],pageData:{currentPage:1,pageCount:50,total:0}}},computed:{fileType:function(){return this.$route.query.fileType?Number(this.$route.query.fileType):0},filePath:function(){return this.$route.query.filePath?this.$route.query.filePath:"/"},fileModel:function(){return this.$store.getters.fileModel},screenWidth:function(){return this.$store.state.common.screenWidth}},watch:{filePath:function(){"File"===this.$route.name&&[0,8].includes(this.fileType)&&(this.setPageCount(),this.getTableDataByType())},fileType:function(){"File"===this.$route.name&&(this.setPageCount(),this.getTableDataByType())},fileModel:function(){this.setPageCount()}},created:function(){this.setPageCount(),this.getTableDataByType()},methods:{handleClickRight:function(e){var t=this;e.preventDefault(),[6,8].includes(this.fileType)||this.$openBox.contextMenu({selectedFile:void 0,domEvent:e,serviceEl:this}).then((function(e){"confirm"===e&&(t.getTableDataByType(),t.$store.dispatch("showStorage"))}))},setPageCount:function(){this.pageData.currentPage=1,0===this.fileModel&&(this.pageData.pageCount=50),1===this.fileModel&&(this.pageData.pageCount=100)},getTableDataByType:function(){if(this.loading=!0,Number(this.fileType))switch(Number(this.fileType)){case 6:this.showFileRecovery();break;case 8:this.showMyShareFile();break;default:this.showFileListByType();break}else this.showFileList();this.$store.dispatch("showStorage")},showFileList:function(){var e=this,t={filePath:this.filePath,currentPage:this.pageData.currentPage,pageCount:this.pageData.pageCount};Object(R["l"])(t).then((function(t){t.success?(e.fileList=t.data.list,e.pageData.total=Number(t.data.total),e.loading=!1):e.$message.error(t.message)}))},handleCurrentChange:function(e){this.pageData.currentPage=e,this.getTableDataByType()},handleSizeChange:function(e){this.pageData.pageCount=e,this.getTableDataByType()},showFileRecovery:function(){var e=this;Object(R["q"])().then((function(t){t.success?(e.fileList=t.data,e.loading=!1):e.$message.error(t.message)}))},showMyShareFile:function(){var e=this,t={shareFilePath:this.filePath,shareBatchNum:this.$route.query.shareBatchNum,currentPage:this.pageData.currentPage,pageCount:this.pageData.pageCount};Object(R["p"])(t).then((function(t){t.success?(e.fileList=t.data.list,e.pageData.total=Number(t.data.total),e.loading=!1):e.$message.error(t.message)}))},showFileListByType:function(){var e=this,t={fileType:this.fileType,currentPage:this.pageData.currentPage,pageCount:this.pageData.pageCount};Object(R["m"])(t).then((function(t){t.success?(e.fileList=t.data.list,e.pageData.total=Number(t.data.total),e.loading=!1):e.$message.error(t.message)}))},getSearchFileList:function(e){var t=this;this.loading=!0,Object(R["y"])({currentPage:this.pageData.currentPage,pageCount:this.pageData.pageCount,fileName:e}).then((function(e){t.loading=!1,e.success?(t.fileList=e.data.map((function(e){return Object(f["a"])(Object(f["a"])({},e),{},{highlightFields:e.highLight.fileName[0]})})),t.pageData.total=e.data.totalHits):t.$message.error(e.message)}))}}},G=A,H=(i("f2b4"),Object(c["a"])(G,d,p,!1,null,"4771e13d",null)),J=H.exports,K={name:"File",components:{AsideMenu:h,FileList:J}},Q=K,U=(i("a98c"),Object(c["a"])(Q,a,l,!1,null,"b3b10b6c",null));t["default"]=U.exports},a15b:function(e,t,i){"use strict";var a=i("23e7"),l=i("e330"),s=i("44ad"),n=i("fc6a"),r=i("a640"),o=l([].join),c=s!=Object,u=r("join",",");a({target:"Array",proto:!0,forced:c||!u},{join:function(e){return o(n(this),void 0===e?",":e)}})},a98c:function(e,t,i){"use strict";i("5c65")},aa68:function(e,t,i){},addb:function(e,t,i){var a=i("4dae"),l=Math.floor,s=function(e,t){var i=e.length,o=l(i/2);return i<8?n(e,t):r(e,s(a(e,0,o),t),s(a(e,o),t),t)},n=function(e,t){var i,a,l=e.length,s=1;while(s<l){a=s,i=e[s];while(a&&t(e[a-1],i)>0)e[a]=e[--a];a!==s++&&(e[a]=i)}return e},r=function(e,t,i,a){var l=t.length,s=i.length,n=0,r=0;while(n<l||r<s)e[n+r]=n<l&&r<s?a(t[n],i[r])<=0?t[n++]:i[r++]:n<l?t[n++]:i[r++];return e};e.exports=s},c0ea:function(e,t,i){"use strict";i("66a2")},c82d5:function(e,t,i){"use strict";i("53d5")},d998:function(e,t,i){var a=i("342f");e.exports=/MSIE|Trident/.test(a)},e09e:function(e,t,i){"use strict";i("736b")},e58c:function(e,t,i){},f2b4:function(e,t,i){"use strict";i("65f9")},fd26:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"breadcrumb-wrapper"},[i("div",{staticClass:"title"},[e._v("当前位置：")]),i("el-input",{directives:[{name:"show",rawName:"v-show",value:e.isShowInput,expression:"isShowInput"}],ref:"filePathInputRef",staticClass:"file-path-input",attrs:{placeholder:"请输入路径",size:"mini",autofocus:!0},on:{blur:e.handleInputBlurEnter,change:e.handleInputBlurEnter},model:{value:e.inputFilePath,callback:function(t){e.inputFilePath=t},expression:"inputFilePath"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isShowInput,expression:"!isShowInput"}],staticClass:"breadcrumb-box",class:{"able-input":0===e.fileType},on:{click:function(t){return t.target!==t.currentTarget?null:e.handleClickBreadCrumbSelf.apply(null,arguments)}}},[[0,8].includes(e.fileType)||["Share"].includes(e.$route.name)?i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},e._l(e.breadCrumbList,(function(t,a){return i("el-breadcrumb-item",{key:a,attrs:{to:e.getRouteQuery(t)}},[e._v(e._s(t.name))])})),1):i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",[e._v(e._s(e.fileTypeMap[e.fileType]))])],1)],1)],1)},l=[],s=(i("a9e3"),i("ac1f"),i("1276"),i("a15b"),i("b0c0"),i("8a79"),i("fb6a"),{name:"BreadCrumb",props:{fileType:{required:!0,type:Number},filePath:{require:!0,type:String}},data:function(){return{fileTypeMap:{1:"全部图片",2:"全部文档",3:"全部视频",4:"全部音乐",5:"其他",6:"回收站"},isShowInput:!1,inputFilePath:""}},computed:{breadCrumbList:{get:function(){for(var e=this.$route.query.filePath,t=e?e.split("/"):[],i=[],a=[],l=0;l<t.length;l++)t[l]?(a.push(t[l]),i.push({path:a.join("/"),name:t[l]})):0===l&&(t[l]="",a.push(t[l]),i.push({path:"/",name:0===this.fileType?"全部文件":8===this.fileType?"我的分享":"Share"===this.$route.name?"全部分享":""}));return i},set:function(){return[]}}},methods:{handleClickBreadCrumbSelf:function(){var e=this;0===this.fileType&&(this.inputFilePath=this.filePath,this.isShowInput=!0,this.$nextTick((function(){e.$refs.filePathInputRef.focus()})))},handleInputBlurEnter:function(){if(this.isShowInput=!1,this.inputFilePath!==this.filePath){var e=this.inputFilePath.endsWith("/")?this.inputFilePath.slice(0,-1):this.inputFilePath;this.$router.push({query:{filePath:"".concat(e),fileType:0}})}},getRouteQuery:function(e){var t=this.$route.name;return"Share"===t?{query:{filePath:e.path}}:8===this.fileType?{query:{fileType:8,filePath:e.path,shareBatchNum:"/"===e.path?void 0:this.$route.query.shareBatchNum}}:{query:{filePath:e.path,fileType:0}}}}}),n=s,r=(i("19d9"),i("2877")),o=Object(r["a"])(n,a,l,!1,null,"5d20e2e2",null);t["a"]=o.exports}}]);